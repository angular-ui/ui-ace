/**
 * angular-ui-ace - This directive allows you to add ACE editor elements.
 * @version v0.1.0b - 2014-02-26
 * @link http://angular-ui.github.com
 * @license MIT
 */
angular.module("ui.ace",[]).constant("uiAceConfig",{}).directive("uiAce",["uiAceConfig",function(k){return{restrict:"EA",require:"?ngModel",link:function(c,d,h,e){var a,b,f;a=angular.extend({},k.ace||{},c.$eval(h.uiAce));var g=a.ace||window.ace;if(!g)throw Error("ui-ace need ace to work... (o rly?)");b=g.edit(d[0]);f=b.getSession();angular.isDefined(a.showGutter)&&b.renderer.setShowGutter(a.showGutter);angular.isDefined(a.useWrapMode)&&f.setUseWrapMode(a.useWrapMode);if(angular.isFunction(a.onLoad))a.onLoad(b);angular.isString(a.theme)&&b.setTheme("ace/theme/"+a.theme);angular.isString(a.mode)&&f.setMode("ace/mode/"+a.mode);h.$observe("readonly",function(a){b.setReadOnly("true"===a)});angular.isDefined(e)&&(e.$formatters.push(function(a){if(angular.isUndefined(a)||null===a)return"";if(angular.isObject(a)||angular.isArray(a))throw Error("ui-ace cannot use an object or an array as a model");return a}),e.$render=function(){f.setValue(e.$viewValue)});f.on("change",function(a){return function(d){var g=f.getValue();g===c.$eval(h.value)||c.$$phase||c.$root.$$phase||(angular.isDefined(e)&&c.$apply(function(){e.$setViewValue(g)}),angular.isDefined(a)&&c.$apply(function(){if(angular.isFunction(a))a(d,b);else throw Error("ui-ace use a function as callback.");}))}}(a.onChange));d.on("$destroy",function(){b.session.$stopWorker();b.destroy()});c.$watch(function(){return[d[0].offsetWidth,d[0].offsetHeight]},function(){b.resize();b.renderer.updateFull()},!0)}}}]);